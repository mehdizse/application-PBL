import{s as l,a as i,b as u,u as g}from"./firebase.75af1a1b.js";const d=document.getElementById("login-form"),p=document.getElementById("signup-form"),E=document.getElementById("toggle-signup"),y=document.getElementById("toggle-login"),m=document.getElementById("signup-form-container"),a=document.getElementById("error-message"),n=document.getElementById("signup-error-message");E.addEventListener("click",()=>{d.parentElement.classList.add("hidden"),m.classList.remove("hidden")});y.addEventListener("click",()=>{d.parentElement.parentElement.classList.remove("hidden"),m.classList.add("hidden")});d.addEventListener("submit",async s=>{s.preventDefault();const o=document.getElementById("login-email").value,r=document.getElementById("login-password").value;try{a.classList.add("hidden");const e=await l(i,o,r);console.log("Utilisateur connecté:",e.user),window.location.href="/admin"}catch(e){a.classList.remove("hidden"),e.code==="auth/user-not-found"?document.getElementById("error-text").textContent="❌ Cet email n'existe pas.":e.code==="auth/wrong-password"?document.getElementById("error-text").textContent="❌ Mot de passe incorrect.":document.getElementById("error-text").textContent=`❌ Erreur: ${e.message}`}});p.addEventListener("submit",async s=>{s.preventDefault();const o=document.getElementById("signup-name").value;document.getElementById("signup-school").value;const r=document.getElementById("signup-email").value,e=document.getElementById("signup-password").value,c=document.getElementById("signup-password-confirm").value;if(e!==c){n.classList.remove("hidden"),document.getElementById("signup-error-text").textContent="❌ Les mots de passe ne correspondent pas.";return}if(e.length<6){n.classList.remove("hidden"),document.getElementById("signup-error-text").textContent="❌ Le mot de passe doit contenir au moins 6 caractères.";return}try{n.classList.add("hidden");const t=await u(i,r,e);await g(t.user,{displayName:o}),console.log("Compte créé:",t.user),alert("✅ Compte créé avec succès! Vous êtes maintenant connecté."),window.location.href="/admin"}catch(t){n.classList.remove("hidden"),t.code==="auth/email-already-in-use"?document.getElementById("signup-error-text").textContent="❌ Cet email est déjà utilisé.":t.code==="auth/weak-password"?document.getElementById("signup-error-text").textContent="❌ Le mot de passe est trop faible.":document.getElementById("signup-error-text").textContent=`❌ Erreur: ${t.message}`}});
