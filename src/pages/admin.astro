---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout>
  <!-- Hero Section -->
  <section class="relative overflow-hidden bg-gradient-to-r from-purple-600 to-pink-600 py-20">
    <div class="section-container relative z-10">
      <h1 class="text-5xl font-bold text-white mb-4">üé® Espace Admin - Ajouter une Production</h1>
      <p class="text-xl text-purple-100">Publiez les √©critures et photos des √©l√®ves facilement</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="section-container py-16">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Main Form -->
      <div class="lg:col-span-2">
        <!-- Tabs for Format Selection -->
        <div class="flex space-x-4 mb-8 border-b-2 border-gray-200">
          <button class="format-tab active pb-4 px-6 border-b-4 border-purple-600 font-bold text-gray-900 transition-all duration-200" data-format="text">
            üìù Format √âcrit
          </button>
          <button class="format-tab pb-4 px-6 border-b-4 border-transparent font-bold text-gray-600 hover:text-gray-900 transition-all duration-200" data-format="photo">
            üì∏ Format Photo
          </button>
        </div>

        <!-- Form Section: Text Format -->
        <form id="text-form" class="format-content card p-8 mb-8">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">üìù Ajouter un Article √âcrit</h2>

          <!-- Form Group: Title -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Titre de la Production *</label>
            <input 
              type="text" 
              placeholder="Ex: Mon premier po√®me sur la nature"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            >
          </div>

          <!-- Form Group: Author -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
              <label class="block text-sm font-bold text-gray-900 mb-2">Nom de l'Auteur *</label>
              <input 
                type="text" 
                placeholder="Ex: Marie Dupont"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
                required
              >
            </div>

            <div>
              <label class="block text-sm font-bold text-gray-900 mb-2">Classe/Niveau *</label>
              <select class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200" required>
                <option value="">S√©lectionnez...</option>
                <option value="cp">CP</option>
                <option value="ce1">CE1</option>
                <option value="ce2">CE2</option>
                <option value="cm1">CM1</option>
                <option value="cm2">CM2</option>
                <option value="6e">6e</option>
                <option value="5e">5e</option>
                <option value="4e">4e</option>
                <option value="3e">3e</option>
              </select>
            </div>
          </div>

          <!-- Form Group: Project Name -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Nom du Projet *</label>
            <input 
              type="text" 
              placeholder="Ex: D√©couvrir la Po√©sie"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            >
          </div>

          <!-- Form Group: Description -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Description du Projet (Contexte) *</label>
            <textarea 
              rows="4"
              placeholder="Expliquez le contexte du projet et ses objectifs p√©dagogiques..."
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            ></textarea>
          </div>

          <!-- Form Group: Content -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Contenu de la Production *</label>
            <textarea 
              rows="10"
              placeholder="Collez le texte de l'√©l√®ve ici..."
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200 font-mono text-sm"
              required
            ></textarea>
          </div>

          <!-- Form Group: Tags -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Tags (s√©par√©s par des virgules)</label>
            <input 
              type="text" 
              placeholder="Ex: po√©sie, nature, cr√©atif"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
            >
          </div>

          <!-- Submit Button -->
          <button 
            type="submit"
            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 rounded-lg transition-all duration-200 shadow-lg"
          >
            üìù Publier l'Article √âcrit
          </button>
        </form>

        <!-- Form Section: Photo Format -->
        <form id="photo-form" class="format-content hidden card p-8">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">üì∏ Ajouter une Photo d'√âcrit</h2>

          <!-- Form Group: Title -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Titre de la Production *</label>
            <input 
              type="text" 
              placeholder="Ex: Mon dessin et mon texte"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            >
          </div>

          <!-- Form Group: Author & Class -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
              <label class="block text-sm font-bold text-gray-900 mb-2">Nom de l'Auteur *</label>
              <input 
                type="text" 
                placeholder="Ex: Jean Martin"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
                required
              >
            </div>

            <div>
              <label class="block text-sm font-bold text-gray-900 mb-2">Classe/Niveau *</label>
              <select class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200" required>
                <option value="">S√©lectionnez...</option>
                <option value="cp">CP</option>
                <option value="ce1">CE1</option>
                <option value="ce2">CE2</option>
                <option value="cm1">CM1</option>
                <option value="cm2">CM2</option>
                <option value="6e">6e</option>
                <option value="5e">5e</option>
                <option value="4e">4e</option>
                <option value="3e">3e</option>
              </select>
            </div>
          </div>

          <!-- Form Group: Project Name -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Nom du Projet *</label>
            <input 
              type="text" 
              placeholder="Ex: Illustrer une Histoire"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            >
          </div>

          <!-- Form Group: Description -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Description du Projet *</label>
            <textarea 
              rows="4"
              placeholder="Contexte et objectifs du projet..."
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
              required
            ></textarea>
          </div>

          <!-- Form Group: Photo Upload -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Photo de la Production *</label>
            <div class="border-2 border-dashed border-purple-300 rounded-lg p-8 text-center hover:bg-purple-50 transition-colors duration-200 cursor-pointer">
              <input 
                type="file" 
                accept="image/*"
                class="hidden"
                id="photo-input"
                required
              >
              <label for="photo-input" class="cursor-pointer">
                <p class="text-4xl mb-2">üì∏</p>
                <p class="text-gray-900 font-bold mb-1">Cliquez ou glissez votre photo</p>
                <p class="text-gray-600 text-sm">Format: JPG, PNG (max 5MB)</p>
              </label>
            </div>
          </div>

          <!-- Form Group: Description of Photo -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Description de la Photo</label>
            <textarea 
              rows="4"
              placeholder="Expliquez ce qu'on voit sur la photo et le contexte..."
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
            ></textarea>
          </div>

          <!-- Form Group: Tags -->
          <div class="mb-6">
            <label class="block text-sm font-bold text-gray-900 mb-2">Tags</label>
            <input 
              type="text" 
              placeholder="Ex: dessin, histoire, cr√©atif"
              class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-600 transition-colors duration-200"
            >
          </div>

          <!-- Submit Button -->
          <button 
            type="submit"
            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 rounded-lg transition-all duration-200 shadow-lg"
          >
            üì∏ Publier la Photo
          </button>
        </form>
      </div>

      <!-- Sidebar: Guidelines & Tips -->
      <aside class="lg:col-span-1">
        <!-- Instructions Card -->
        <div class="card p-8 mb-8 bg-gradient-to-br from-purple-50 to-pink-50">
          <h3 class="text-2xl font-bold text-gray-900 mb-4">üìã Instructions</h3>
          
          <div class="space-y-4 text-sm text-gray-700">
            <div>
              <p class="font-bold text-purple-600 mb-1">‚úÖ Format √âcrit</p>
              <p>Collez directement le texte ou la production √©crite de l'√©l√®ve</p>
            </div>

            <div class="border-t border-gray-200 pt-4">
              <p class="font-bold text-purple-600 mb-1">‚úÖ Format Photo</p>
              <p>Uploadez une photo de la production (dessin + texte, travail manuels, etc.)</p>
            </div>

            <div class="border-t border-gray-200 pt-4">
              <p class="font-bold text-purple-600 mb-1">‚úÖ Informations Requises</p>
              <p>Titre, auteur, classe et contexte du projet</p>
            </div>

            <div class="border-t border-gray-200 pt-4">
              <p class="font-bold text-purple-600 mb-1">‚úÖ Utilit√© des Tags</p>
              <p>Cat√©gorisez pour une meilleure organisation</p>
            </div>
          </div>
        </div>

        <!-- Tips Card -->
        <div class="card p-8 mb-8 border-2 border-purple-500">
          <h3 class="text-2xl font-bold text-gray-900 mb-4">üí° Conseils Utiles</h3>
          
          <ul class="space-y-3 text-sm text-gray-700">
            <li class="flex items-start space-x-2">
              <span class="text-purple-600 font-bold">‚Ä¢</span>
              <span>Obtenez l'accord des parents/tuteurs avant de publier</span>
            </li>
            <li class="flex items-start space-x-2">
              <span class="text-purple-600 font-bold">‚Ä¢</span>
              <span>Variez les types de productions (po√®mes, histoires, articles...)</span>
            </li>
            <li class="flex items-start space-x-2">
              <span class="text-purple-600 font-bold">‚Ä¢</span>
              <span>Partagez les photos au moins une fois par mois</span>
            </li>
            <li class="flex items-start space-x-2">
              <span class="text-purple-600 font-bold">‚Ä¢</span>
              <span>C√©l√©brez toutes les productions pour motiver les √©l√®ves</span>
            </li>
            <li class="flex items-start space-x-2">
              <span class="text-purple-600 font-bold">‚Ä¢</span>
              <span>Utilisez les meilleurs travaux pour inspirer d'autres √©l√®ves</span>
            </li>
          </ul>
        </div>

        <!-- Recent Submissions -->
        <div class="card p-8 bg-gradient-to-br from-gray-50 to-gray-100">
          <h3 class="text-2xl font-bold text-gray-900 mb-4">üìä Statistiques</h3>
          
          <div class="space-y-6">
            <div class="text-center">
              <p class="text-4xl font-bold text-purple-600 mb-2">24</p>
              <p class="text-gray-700 font-semibold">Contributions ce mois</p>
            </div>
            
            <div class="text-center border-t border-gray-200 pt-4">
              <p class="text-4xl font-bold text-pink-600 mb-2">156</p>
              <p class="text-gray-700 font-semibold">Total publications</p>
            </div>

            <div class="text-center border-t border-gray-200 pt-4">
              <p class="text-4xl font-bold text-blue-600 mb-2">45</p>
              <p class="text-gray-700 font-semibold">√âl√®ves participants</p>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <!-- Preview Section -->
  <section class="bg-gradient-to-r from-purple-100 to-pink-100 py-16 rounded-lg mt-12">
    <div class="section-container">
      <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">üëÄ Aper√ßu des R√©centes Publications</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Sample Card 1 -->
        <div class="card p-6 hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between mb-4">
            <span class="text-3xl">‚úçÔ∏è</span>
            <span class="text-xs bg-purple-200 text-purple-700 px-3 py-1 rounded-full">Format √âcrit</span>
          </div>
          <h4 class="text-lg font-bold text-gray-900 mb-2">Mon R√™ve</h4>
          <p class="text-sm text-gray-600 mb-3"><strong>Auteur:</strong> Sophie B. (CM2)</p>
          <p class="text-sm text-gray-700 mb-4 line-clamp-3">Un texte po√©tique sur les r√™ves et les aspirations...</p>
          <div class="flex space-x-2">
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">po√©sie</span>
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">cr√©atif</span>
          </div>
        </div>

        <!-- Sample Card 2 -->
        <div class="card p-6 hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between mb-4">
            <span class="text-3xl">üì∏</span>
            <span class="text-xs bg-pink-200 text-pink-700 px-3 py-1 rounded-full">Format Photo</span>
          </div>
          <h4 class="text-lg font-bold text-gray-900 mb-2">Le Monde du Futur</h4>
          <p class="text-sm text-gray-600 mb-3"><strong>Auteur:</strong> Lucas M. (CE2)</p>
          <p class="text-sm text-gray-700 mb-4">Dessin et texte sur une vision futuriste...</p>
          <div class="flex space-x-2">
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">dessin</span>
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">imaginaire</span>
          </div>
        </div>

        <!-- Sample Card 3 -->
        <div class="card p-6 hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between mb-4">
            <span class="text-3xl">‚úçÔ∏è</span>
            <span class="text-xs bg-purple-200 text-purple-700 px-3 py-1 rounded-full">Format √âcrit</span>
          </div>
          <h4 class="text-lg font-bold text-gray-900 mb-2">L'Aventure en For√™t</h4>
          <p class="text-sm text-gray-600 mb-3"><strong>Auteur:</strong> Emma L. (CM1)</p>
          <p class="text-sm text-gray-700 mb-4">Une histoire de d√©couverte et d'amiti√©...</p>
          <div class="flex space-x-2">
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">histoire</span>
            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">aventure</span>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Tab switching functionality
  document.querySelectorAll('.format-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      const format = tab.dataset.format;
      
      // Update tab styles
      document.querySelectorAll('.format-tab').forEach(t => {
        t.classList.remove('active', 'border-purple-600', 'border-b-4');
        t.classList.add('border-transparent', 'text-gray-600');
      });
      tab.classList.add('active', 'border-purple-600', 'border-b-4', 'text-gray-900');
      
      // Update form visibility
      document.querySelectorAll('.format-content').forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`${format}-form`).classList.remove('hidden');
    });
  });

  // Photo upload drag & drop
  const photoInput = document.getElementById('photo-input');
  const uploadArea = photoInput?.parentElement.parentElement;
  
  if (uploadArea) {
    uploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadArea.classList.add('bg-purple-50', 'border-purple-600');
    });
    
    uploadArea.addEventListener('dragleave', () => {
      uploadArea.classList.remove('bg-purple-50', 'border-purple-600');
    });
    
    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.classList.remove('bg-purple-50', 'border-purple-600');
      photoInput.files = e.dataTransfer.files;
    });
  }

  // Form submission
  document.getElementById('text-form').addEventListener('submit', (e) => {
    e.preventDefault();
    alert('‚úÖ Article √©crit soumis avec succ√®s!\n\nVotre production sera bient√¥t publi√©e apr√®s v√©rification.');
  });

  document.getElementById('photo-form').addEventListener('submit', (e) => {
    e.preventDefault();
    alert('‚úÖ Photo soumise avec succ√®s!\n\nVotre production sera bient√¥t publi√©e apr√®s v√©rification.');
  });
</script>
